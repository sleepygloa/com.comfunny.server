<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.comfunny.server.proj.sd.repository.ZoneDao">

    <select id="selectLevelDcList"  resultType="HMap"  parameterType="HMap">
        SELECT /*[ZoneDao.xml][selectLevelDcList] 존관리 의 창고 데이터들을 조회 */
        BIZ_CD
        , DC_CD
        , DC_NM
        FROM tb_ms_dc
        WHERE 1=1
    </select>

    <select id="selectLevelAreaList"  resultType="HMap"  parameterType="HMap">
        SELECT /*[ZoneDao.xml][selectLevelAreaList] 존관리 의 창고구역 데이터들을 조회 */
        BIZ_CD
        , DC_CD
        , AREA_CD
        , AREA_NM
        FROM tb_ms_area
        WHERE 1=1
          AND DC_CD = #{dcCd}
    </select>

    <select id="selectLevelZoneList"  resultType="HMap"  parameterType="HMap">
        SELECT /*[ZoneDao.xml][selectLevelZoneList] 존관리 의 창고구역존 데이터들을 조회 */
        BIZ_CD
        , DC_CD
        , AREA_CD
        , ZONE_CD
        , ZONE_NM
        , KEEP_TYPE_CD
        , HOLD_ST_CD
        , REMARK
        , USE_YN
        FROM tb_ms_zone
        WHERE 1=1
          AND BIZ_CD = #{bizCd}
          AND DC_CD = #{dcCd}
          AND AREA_CD = #{areaCd}
    </select>
    <select id="selectZoneList"  resultType="HMap"  parameterType="HMap">
        SELECT /*[ZoneDao.xml][selectZoneList] 존 데이터들을 조회 */
        ZONE.BIZ_CD
        , ZONE.DC_CD
        , DC.DC_NM
        , ZONE.AREA_CD
        , AREA.AREA_NM
        , ZONE.ZONE_CD
        , ZONE.ZONE_NM
        , ZONE.KEEP_TYPE_CD
        , ZONE.HOLD_ST_CD
        , ZONE.REMARK
        , ZONE.USE_YN
        , ZONE.IN_DT
        , ZONE.IN_USER_ID
        , ZONE.UP_DT
        , ZONE.UP_USER_ID
        FROM tb_ms_dc AS DC
        JOIN tb_ms_area AS AREA
        ON DC.BIZ_CD = AREA.BIZ_CD
        AND DC.DC_CD = AREA.DC_CD
        JOIN tb_ms_zone AS ZONE
        ON AREA.BIZ_CD = ZONE.BIZ_CD
        AND AREA.DC_CD = ZONE.DC_CD
        AND AREA.AREA_CD = ZONE.AREA_CD
        WHERE 1=1
        <if test="zoneNm != null and zoneNm != ''">
            AND (
               ZONE.ZONE_CD LIKE '%'#{zoneNm}'%'
            OR ZONE.ZONE_NM LIKE '%'#{zoneNm}'%'
            )
        </if>
    </select>

</mapper>
